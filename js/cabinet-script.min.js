const asideButton=document.querySelector(".cabinet__aside-button"),asideMenu=document.querySelector(".cabinet__aside"),cabinetContent=document.querySelector(".cabinet__content"),cabinetFooter=document.querySelector(".cabinet__footer");function toggleMenu(){asideMenu.classList.toggle("compact"),asideButton.classList.toggle("compact"),cabinetContent.classList.toggle("full"),cabinetFooter.classList.toggle("full");const e=asideButton.classList.contains("compact"),t=asideMenu.classList.contains("compact"),n=cabinetContent.classList.contains("full"),o=cabinetFooter.classList.contains("full");localStorage.setItem("contentFull",n),localStorage.setItem("footerFull",o),localStorage.setItem("menuCompact",t),localStorage.setItem("menuButtonCompact",e)}document.addEventListener("DOMContentLoaded",(function(){asideMenu.classList.add("ready"),cabinetContent.classList.add("ready"),cabinetFooter.classList.add("ready"),asideButton.classList.add("ready");const e="true"===localStorage.getItem("menuCompact"),t="true"===localStorage.getItem("contentFull"),n="true"===localStorage.getItem("footerFull"),o="true"===localStorage.getItem("menuButtonCompact");e&&asideMenu.classList.add("compact"),t&&cabinetContent.classList.add("full"),n&&cabinetFooter.classList.add("full"),o&&asideButton.classList.add("compact")})),asideButton.addEventListener("click",toggleMenu);const yearSelect=document.querySelectorAll("#year-select"),startYear=1940,currentYear=(new Date).getFullYear();yearSelect.forEach(e=>{for(let t=currentYear;t>=1940;t--){const n=document.createElement("option");n.value=t,n.textContent=t,e.appendChild(n)}});const daySelect=document.querySelectorAll("#day-select");daySelect.forEach(e=>{for(let t=1;t<=31;t++){const n=document.createElement("option");n.value=t,n.textContent=t,e.appendChild(n)}}),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".cabinet__form"),t=document.querySelector(".step-next-button"),n=e.querySelectorAll("input[required], select[required]");function o(){let e=!0;n.forEach(t=>{t.value.trim()||(e=!1)}),e?t.removeAttribute("disabled"):t.setAttribute("disabled","disabled")}n.forEach(e=>{e.addEventListener("input",o)}),o()}));const region=document.getElementById("region"),city=document.getElementById("city"),school=document.getElementById("school");region.addEventListener("change",(function(){""!==region.value&&(city.disabled=!1)})),city.addEventListener("change",(function(){""!==city.value&&(school.disabled=!1)}));const phoneInput=document.getElementById("phone"),additionalPhoneInput=document.getElementById("additional-phone");phoneInput&&IMask(phoneInput,{mask:"+{375}(00)000-00-00",lazy:!1}),additionalPhoneInput&&IMask(additionalPhoneInput,{mask:"+{375}(00)000-00-00",lazy:!1});const benefitCheckbox=document.getElementById("benefit-checkbox"),fileUploadSection=document.querySelector(".file-upload-section"),fileUploadBody=document.querySelector(".file-upload-body"),customFileInputButton=document.querySelector(".custom-file-button"),fileInput=document.querySelector(".file-input"),filePreview=document.querySelector(".file-preview"),fileName=document.querySelector(".file-name"),fileThumbnail=document.querySelector(".file-thumbnail"),cancelButton=document.querySelector(".cancel-button");function resetFileInput(){fileInput.value="",fileName.textContent="",fileThumbnail.src="",fileThumbnail.classList.add("hidden"),filePreview.classList.add("hidden"),cancelButton.classList.add("hidden"),fileUploadBody.classList.remove("hidden")}benefitCheckbox.addEventListener("change",(function(){this.checked?fileUploadSection.classList.remove("hidden"):(fileUploadSection.classList.add("hidden"),resetFileInput())})),customFileInputButton.addEventListener("click",(function(){fileInput.click()})),fileInput.addEventListener("change",(function(e){const t=e.target.files[0];if(t)if(fileName.textContent=t.name,filePreview.classList.remove("hidden"),cancelButton.classList.remove("hidden"),fileUploadBody.classList.add("hidden"),t.type.startsWith("image/")){const e=new FileReader;e.onload=function(e){fileThumbnail.src=e.target.result,fileThumbnail.classList.remove("hidden")},e.readAsDataURL(t)}else fileThumbnail.classList.add("hidden"),fileThumbnail.src="",fileThumbnail.alt=""})),cancelButton.addEventListener("click",(function(){resetFileInput()})),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelectorAll(".cabinet__form-step");let t=0;const n=document.querySelectorAll(".step-next-button"),o=document.querySelectorAll(".step-prev-button"),c=document.querySelector(".step-submit-button");function l(n){e.forEach((e,t)=>{e.style.display=t===n?"flex":"none"}),t=n}function i(t){const n=e[t].querySelectorAll("input[required], select[required]");let o=!0;return n.forEach(e=>{e.checkValidity()||(o=!1)}),o}function a(){const t=e.length-1;c.disabled=!i(t)}function d(t){e[t].querySelectorAll("input[required], select[required]").forEach(n=>{n.addEventListener("input",()=>{t===e.length-1?a():function(t){e[t].querySelector(".step-next-button").disabled=!i(t)}(t)})})}l(t),e.forEach((e,t)=>d(t)),n.forEach((e,t)=>{e.addEventListener("click",(function(){i(t)&&l(t+1)}))}),o.forEach((e,t)=>{e.addEventListener("click",(function(){l(t)}))}),a()})),document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("cabinet__form");console.log(e);const t=document.getElementById("modal-window"),n=document.getElementById("modal-close-btn"),o=document.body;t&&(e.addEventListener("submit",(function(e){e.preventDefault(),t.classList.add("open")})),n.addEventListener("click",(function(){t.classList.remove("open")})),t.classList.contains("open")?o.classList.add("no-scroll"):o.classList.remove("no-scroll"),window.addEventListener("click",(function(e){e.target===t&&t.classList.remove("open")})))}));