const asideButton=document.querySelector(".cabinet__aside-button"),asideMenu=document.querySelector(".cabinet__aside"),cabinetContent=document.querySelector(".cabinet__content"),cabinetFooter=document.querySelector(".cabinet__footer");function toggleMenu(){asideMenu.classList.toggle("compact"),asideButton.classList.toggle("compact"),cabinetContent.classList.toggle("full"),cabinetFooter.classList.toggle("full");const isMenuButtomCompact=asideButton.classList.contains("compact"),isCompact=asideMenu.classList.contains("compact"),isContentFull=cabinetContent.classList.contains("full"),isFooterFull=cabinetFooter.classList.contains("full");localStorage.setItem("contentFull",isContentFull),localStorage.setItem("footerFull",isFooterFull),localStorage.setItem("menuCompact",isCompact),localStorage.setItem("menuButtonCompact",isMenuButtomCompact)}document.addEventListener("DOMContentLoaded",(function(){asideMenu.classList.add("ready"),cabinetContent.classList.add("ready"),cabinetFooter.classList.add("ready"),asideButton.classList.add("ready");const isCompact="true"===localStorage.getItem("menuCompact"),isContentFull="true"===localStorage.getItem("contentFull"),isFooterFull="true"===localStorage.getItem("footerFull"),isMenuButtonCompact="true"===localStorage.getItem("menuButtonCompact");isCompact&&asideMenu.classList.add("compact"),isContentFull&&cabinetContent.classList.add("full"),isFooterFull&&cabinetFooter.classList.add("full"),isMenuButtonCompact&&asideButton.classList.add("compact")})),asideButton.addEventListener("click",toggleMenu),document.addEventListener("DOMContentLoaded",(function(){const data1={"Брестская область":{"Брест":["Школа 1","Школа 2"],"Брест2":["Школа 3","Школа 4"],city3:["Школа 5","Школа 6"],city4:["Школа 7","Школа 8"]},"Гомельская область":{"Гомель":["Школа 9","Школа 10"],city6:["Школа 11","Школа 12"],city7:["Школа 13","Школа 14"],city8:["Школа 15","Школа 16"]}},regionSelect=document.getElementById("region"),citySelect=document.getElementById("city"),schoolSelect=document.getElementById("school");citySelect&&(citySelect.disabled=!0),schoolSelect&&(schoolSelect.disabled=!0),function populateRegions(){regionSelect&&Object.keys(data1).forEach((regionName=>{const option=document.createElement("option");option.value=regionName,option.textContent=regionName,regionSelect.appendChild(option)}))}(),regionSelect&&regionSelect.addEventListener("change",(function(){const selectedRegion=this.value;""!==selectedRegion?(citySelect.disabled=!1,function populateCities(regionName){if(citySelect){citySelect.innerHTML='<option value="all">Выберите город</option>';const cities=data1[regionName];cities&&Object.keys(cities).forEach((cityName=>{const option=document.createElement("option");option.value=cityName,option.textContent=cityName,citySelect.appendChild(option)}))}}(selectedRegion),schoolSelect&&(schoolSelect.disabled=!0,schoolSelect.innerHTML='<option value="">Выберите школу</option>')):(citySelect.disabled=!0,citySelect.innerHTML='<option value="">Выберите город</option>',schoolSelect&&(schoolSelect.disabled=!0,schoolSelect.innerHTML='<option value="">Выберите школу</option>'))})),citySelect&&citySelect.addEventListener("change",(function(){const selectedCity=this.value,selectedRegion=regionSelect.value;""!==selectedCity?schoolSelect&&(schoolSelect.disabled=!1,function populateSchools(regionName,cityName){if(schoolSelect){schoolSelect.innerHTML='<option value="all">Выберите школу</option>';const cities=data1[regionName];if(cities){const schools=cities[cityName];schools&&schools.forEach((schoolName=>{const option=document.createElement("option");option.value=schoolName,option.textContent=schoolName,schoolSelect.appendChild(option)}))}}}(selectedRegion,selectedCity)):(schoolSelect.disabled=!0,schoolSelect.innerHTML='<option value="">Выберите школу</option>')}))}));const phoneInput=document.getElementById("phone"),additionalPhoneInput=document.getElementById("additional-phone");phoneInput&&IMask(phoneInput,{mask:"+{375}(00)000-00-00",lazy:!1}),additionalPhoneInput&&IMask(additionalPhoneInput,{mask:"+{375}(00)000-00-00",lazy:!1});const benefitCheckbox=document.getElementById("benefit-checkbox"),fileUploadSection=document.querySelector(".file-upload-section"),fileUploadBody=document.querySelector(".file-upload-body"),customFileInputButton=document.querySelector(".custom-file-button"),fileInput=document.querySelector(".file-input"),filePreview=document.querySelector(".file-preview"),fileName=document.querySelector(".file-name"),fileThumbnail=document.querySelector(".file-thumbnail"),cancelButton=document.querySelector(".cancel-button");if(benefitCheckbox){function resetFileInput(){fileInput.value="",fileName.textContent="",fileThumbnail.src="",fileThumbnail.classList.add("hidden"),filePreview.classList.add("hidden"),cancelButton.classList.add("hidden"),fileUploadBody.classList.remove("hidden")}benefitCheckbox.addEventListener("change",(function(){this.checked?fileUploadSection.classList.remove("hidden"):(fileUploadSection.classList.add("hidden"),resetFileInput())})),customFileInputButton.addEventListener("click",(function(){fileInput.click()})),fileInput.addEventListener("change",(function(event){const file=event.target.files[0];if(file)if(fileName.textContent=file.name,filePreview.classList.remove("hidden"),cancelButton.classList.remove("hidden"),fileUploadBody.classList.add("hidden"),file.type.startsWith("image/")){const reader=new FileReader;reader.onload=function(e){fileThumbnail.src=e.target.result,fileThumbnail.classList.remove("hidden")},reader.readAsDataURL(file)}else fileThumbnail.classList.add("hidden"),fileThumbnail.src="",fileThumbnail.alt=""})),cancelButton.addEventListener("click",(function(){resetFileInput()}))}document.addEventListener("DOMContentLoaded",(function(){let steps=document.querySelectorAll(".cabinet__form-step");if(steps){let currentStep=0;const nextButtons=document.querySelectorAll(".step-next-button"),prevButtons=document.querySelectorAll(".step-prev-button"),submitButton=document.querySelector(".step-submit-button"),stepperItems=document.querySelectorAll(".stepper .step"),benefitCheckbox=document.getElementById("benefit-checkbox"),fileInput=document.querySelector(".file-input"),phoneInput=document.getElementById("phone"),nextButtonStep3=document.querySelector(".step-next-button-3");function showStep(index){steps.forEach(((step,idx)=>{step.style.display=idx===index?"flex":"none"})),function updateStepper(index){stepperItems.forEach(((step,idx)=>{idx<=index?step.classList.add("active"):step.classList.remove("active")}))}(index),currentStep=index,index<steps.length-1&&toggleNextButton(index)}function validatePhone(){let phoneValid=!0;return 12===phoneInput.value.replace(/\D/g,"").length?(nextButtonStep3&&(nextButtonStep3.disabled=!1),phoneValid=!0):nextButtonStep3&&(nextButtonStep3.disabled=!0,phoneValid=!1),phoneValid}function validateStep(stepIndex){if(steps[stepIndex]){const inputs=steps[stepIndex].querySelectorAll("input[required]:not(.hidden), select[required]:not(.hidden)");let allValid=!0;if(inputs.forEach((input=>{input.checkValidity()||(allValid=!1)})),2==stepIndex){return validatePhone()}return allValid}}function toggleNextButton(stepIndex){steps[stepIndex].querySelector(".step-next-button").disabled=!validateStep(stepIndex)}function toggleSubmitButton(){const lastStepIndex=steps.length-1;if(fileInput&&benefitCheckbox){const isFileSelected=fileInput.files.length>0,isCheckboxChecked=benefitCheckbox.checked,allFieldsValid=validateStep(lastStepIndex);submitButton&&(submitButton.disabled=isCheckboxChecked?!(isFileSelected&&allFieldsValid):!allFieldsValid)}}phoneInput&&phoneInput.addEventListener("input",validatePhone);const nextStepAgeCheck=document.getElementById("next-step-age-check");nextStepAgeCheck&&nextStepAgeCheck.addEventListener("click",(function(){const birthDay=document.querySelector(".birth-day-select").value,birthMonth=document.getElementById("month-select").value,birthYear=document.querySelector(".birth-year-select").value,personalFields=document.getElementById("personal-fields"),representativeFields=document.getElementById("representative-fields"),birthDate=new Date(`${birthYear}-${birthMonth}-${birthDay}`),ageDiff=new Date-birthDate;if(Math.floor(ageDiff/31536e6)<16){if(personalFields){personalFields.classList.add("hidden"),representativeFields.classList.remove("hidden");personalFields.querySelectorAll("input, select").forEach((input=>{input.classList.add("hidden"),input.removeAttribute("required")}));representativeFields.querySelectorAll("input, select").forEach((input=>{input.classList.remove("hidden"),input.setAttribute("required","true")}))}}else if(representativeFields){personalFields.classList.remove("hidden"),representativeFields.classList.add("hidden");personalFields.querySelectorAll("input, select").forEach((input=>{input.classList.remove("hidden"),input.setAttribute("required","true")}));representativeFields.querySelectorAll("input, select").forEach((input=>{input.classList.add("hidden"),input.removeAttribute("required")}))}showStep(currentStep)})),nextButtons.forEach(((button,index)=>{button.addEventListener("click",(function(){validateStep(index)&&currentStep<steps.length-1&&showStep(currentStep+1)}))})),prevButtons.forEach((button=>{button.addEventListener("click",(function(){currentStep>0&&showStep(currentStep-1)}))})),benefitCheckbox&&benefitCheckbox.addEventListener("change",toggleSubmitButton),fileInput&&fileInput.addEventListener("change",toggleSubmitButton),showStep(currentStep),steps.forEach(((_,index)=>function addValidationListeners(stepIndex){steps[stepIndex].querySelectorAll("input[required], select[required]").forEach((input=>{input.addEventListener("input",(()=>{stepIndex===steps.length-1?toggleSubmitButton():toggleNextButton(stepIndex)}))}))}(index))),toggleSubmitButton()}})),document.addEventListener("DOMContentLoaded",(()=>{const passwordInputs=document.querySelectorAll(".password-input"),submitChangePass=document.querySelector(".change-password-submit"),validationMessage=document.querySelector(".password-info-message");passwordInputs.forEach((passwordInput=>{const errorMessage=passwordInput.nextElementSibling.nextElementSibling;"old-pass"!==passwordInput.id&&passwordInput.addEventListener("input",(function(){const isValid=function validatePassword(password){const hasUpperCase=/[A-Z]/.test(password),hasLowerCase=/[a-z]/.test(password),hasNumber=/\d/.test(password),isValidLength=password.length>=8;return hasUpperCase&&hasLowerCase&&hasNumber&&isValidLength}(passwordInput.value);isValid?(passwordInput.classList.add("valid"),passwordInput.classList.remove("invalid"),errorMessage.classList.remove("active"),submitChangePass.disabled=!1,validationMessage&&(validationMessage.innerText="Пароль соответствует требованиям")):(errorMessage.classList.add("active"),passwordInput.classList.add("invalid"),passwordInput.classList.remove("valid"),submitChangePass.disabled=!0,validationMessage&&(validationMessage.innerText="Пароль должен быть не менее 8 символов длиной, содержать латинские символы верхнего регистра (A-Z), содержать латинские символы нижнего регистра (a-z), содержать цифры (0-9)."))}))}))})),document.addEventListener("DOMContentLoaded",(function(){const passwordInputs=document.querySelectorAll(".password-input");document.querySelectorAll(".password-icon").forEach(((icon,index)=>{icon.addEventListener("click",(function(){const passwordInput=passwordInputs[index],type="password"===passwordInput.getAttribute("type")?"text":"password";passwordInput.setAttribute("type",type),"password"===type?(this.classList.remove("bi-eye"),this.classList.add("bi-eye-slash")):(this.classList.remove("bi-eye-slash"),this.classList.add("bi-eye"))}))}))})),document.addEventListener("DOMContentLoaded",(function(){const menuToggle=document.querySelector(".menu-toggle"),cabinetMobileMenu=document.querySelector(".cabinet__mobile-menu"),cabinetMobileProfile=document.querySelector(".cabinet__mobile-profile"),profileButton=document.querySelector(".cabinet__profile-btn"),body=document.body;menuToggle&&menuToggle.addEventListener("click",(function(){menuToggle.classList.toggle("open"),cabinetMobileMenu.classList.toggle("open"),cabinetMobileProfile.classList.contains("open")&&cabinetMobileProfile.classList.remove("open"),cabinetMobileMenu.classList.contains("open")?body.classList.add("no-scroll"):body.classList.remove("no-scroll")})),cabinetMobileProfile&&profileButton.addEventListener("click",(function(){cabinetMobileProfile.classList.toggle("open"),cabinetMobileMenu.classList.contains("open")&&(cabinetMobileMenu.classList.remove("open"),menuToggle.classList.remove("open")),cabinetMobileProfile.classList.contains("open")?body.classList.add("no-scroll"):body.classList.remove("no-scroll")}))})),document.addEventListener("DOMContentLoaded",(function(){const modal=document.getElementById("modal-window-exit"),closeButton=document.getElementById("modal-close-btn"),cancelButton=document.querySelector(".cancel-btn"),exitBtns=document.querySelectorAll(".exit-btn"),body=document.body;modal&&(exitBtns.forEach((btn=>btn.addEventListener("click",(function(event){event.preventDefault(),modal.classList.add("open")})))),closeButton.addEventListener("click",(function(){modal.classList.remove("open")})),cancelButton.addEventListener("click",(function(){modal.classList.remove("open")})),modal.classList.contains("open")?body.classList.add("no-scroll"):body.classList.remove("no-scroll"),window.addEventListener("click",(function(event){event.target===modal&&modal.classList.remove("open")})))})),document.addEventListener("DOMContentLoaded",(function(){const fileInput=document.querySelector(".cabinet__profile-img-input"),profileImg=document.querySelector(".cabinet__profile-img img"),profileImgContainer=document.querySelector(".cabinet__profile-img"),customFileButton=document.getElementById("custom-upload-button"),deleteButton=document.getElementById("custom-delete-button"),memberCardImg=document.querySelector(".member-card__avatar");customFileButton&&customFileButton.addEventListener("click",(()=>{fileInput.click()})),fileInput&&fileInput.addEventListener("change",(function(event){const file=event.target.files[0];if(file){const reader=new FileReader;reader.onload=function(e){profileImg.src=e.target.result,memberCardImg&&(memberCardImg.src=e.target.result,memberCardImg.classList.remove("hidden")),profileImgContainer.classList.remove("icon"),profileImgContainer.classList.add("image"),deleteButton.classList.remove("hidden")},reader.readAsDataURL(file)}})),deleteButton&&deleteButton.addEventListener("click",(function(){profileImg.src="./img/icons/profile-icon.svg",profileImgContainer.classList.add("icon"),profileImgContainer.classList.remove("image"),deleteButton.classList.add("hidden"),memberCardImg&&memberCardImg.classList.add("hidden")}))}));const AG_GRID_LOCALE_RU={more:"More",to:"-",of:"из",page:"Страница",pageLastRowUnknown:"?",nextPage:"Next Page",lastPage:"Last Page",firstPage:"First Page",previousPage:"Previous Page",pageSizeSelectorLabel:"Количество элементов на странице",footerTotal:"Total"};