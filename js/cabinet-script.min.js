const asideButton=document.querySelector(".cabinet__aside-button"),asideMenu=document.querySelector(".cabinet__aside"),cabinetContent=document.querySelector(".cabinet__content"),cabinetFooter=document.querySelector(".cabinet__footer");function toggleMenu(){asideMenu.classList.toggle("compact"),asideButton.classList.toggle("compact"),cabinetContent.classList.toggle("full"),cabinetFooter.classList.toggle("full");const e=asideButton.classList.contains("compact"),t=asideMenu.classList.contains("compact"),n=cabinetContent.classList.contains("full"),o=cabinetFooter.classList.contains("full");localStorage.setItem("contentFull",n),localStorage.setItem("footerFull",o),localStorage.setItem("menuCompact",t),localStorage.setItem("menuButtonCompact",e)}document.addEventListener("DOMContentLoaded",(function(){asideMenu.classList.add("ready"),cabinetContent.classList.add("ready"),cabinetFooter.classList.add("ready"),asideButton.classList.add("ready");const e="true"===localStorage.getItem("menuCompact"),t="true"===localStorage.getItem("contentFull"),n="true"===localStorage.getItem("footerFull"),o="true"===localStorage.getItem("menuButtonCompact");e&&asideMenu.classList.add("compact"),t&&cabinetContent.classList.add("full"),n&&cabinetFooter.classList.add("full"),o&&asideButton.classList.add("compact")})),asideButton.addEventListener("click",toggleMenu),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelectorAll("#year-select"),t=(new Date).getFullYear();e.forEach(e=>{for(let n=t;n>=1940;n--){const t=document.createElement("option");t.value=n,t.textContent=n,e.appendChild(t)}});document.querySelectorAll("#day-select").forEach(e=>{for(let t=1;t<=31;t++){const n=document.createElement("option");n.value=t,n.textContent=t,e.appendChild(n)}});const n=document.querySelector(".cabinet__form"),o=document.querySelector(".step-next-button"),c=n.querySelectorAll("input[required], select[required]");function s(){let e=!0;c.forEach(t=>{t.value.trim()||(e=!1)}),e?o.removeAttribute("disabled"):o.setAttribute("disabled","disabled")}c.forEach(e=>{e.addEventListener("input",s)}),s();const i=document.getElementById("region"),l=document.getElementById("city"),a=document.getElementById("school");i.addEventListener("change",(function(){""!==i.value&&(l.disabled=!1)})),l.addEventListener("change",(function(){""!==l.value&&(a.disabled=!1)}))}));const phoneInput=document.getElementById("phone"),additionalPhoneInput=document.getElementById("additional-phone");phoneInput&&IMask(phoneInput,{mask:"+{375}(00)000-00-00",lazy:!1}),additionalPhoneInput&&IMask(additionalPhoneInput,{mask:"+{375}(00)000-00-00",lazy:!1});const benefitCheckbox=document.getElementById("benefit-checkbox"),fileUploadSection=document.querySelector(".file-upload-section"),fileUploadBody=document.querySelector(".file-upload-body"),customFileInputButton=document.querySelector(".custom-file-button"),fileInput=document.querySelector(".file-input"),filePreview=document.querySelector(".file-preview"),fileName=document.querySelector(".file-name"),fileThumbnail=document.querySelector(".file-thumbnail"),cancelButton=document.querySelector(".cancel-button");if(benefitCheckbox){function resetFileInput(){fileInput.value="",fileName.textContent="",fileThumbnail.src="",fileThumbnail.classList.add("hidden"),filePreview.classList.add("hidden"),cancelButton.classList.add("hidden"),fileUploadBody.classList.remove("hidden")}benefitCheckbox.addEventListener("change",(function(){this.checked?fileUploadSection.classList.remove("hidden"):(fileUploadSection.classList.add("hidden"),resetFileInput())})),customFileInputButton.addEventListener("click",(function(){fileInput.click()})),fileInput.addEventListener("change",(function(e){const t=e.target.files[0];if(t)if(fileName.textContent=t.name,filePreview.classList.remove("hidden"),cancelButton.classList.remove("hidden"),fileUploadBody.classList.add("hidden"),t.type.startsWith("image/")){const e=new FileReader;e.onload=function(e){fileThumbnail.src=e.target.result,fileThumbnail.classList.remove("hidden")},e.readAsDataURL(t)}else fileThumbnail.classList.add("hidden"),fileThumbnail.src="",fileThumbnail.alt=""})),cancelButton.addEventListener("click",(function(){resetFileInput()}))}document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("cabinet__form"),t=document.getElementById("modal-window"),n=document.getElementById("modal-close-btn"),o=document.body;t&&(e.addEventListener("submit",(function(e){e.preventDefault(),t.classList.add("open")})),n.addEventListener("click",(function(){t.classList.remove("open")})),t.classList.contains("open")?o.classList.add("no-scroll"):o.classList.remove("no-scroll"),window.addEventListener("click",(function(e){e.target===t&&t.classList.remove("open")})))})),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".cabinet__profile-img-input"),t=document.querySelector(".cabinet__profile-img img"),n=document.querySelector(".cabinet__profile-img"),o=document.getElementById("custom-upload-button"),c=document.getElementById("custom-delete-button");o.addEventListener("click",()=>{e.click()}),e.addEventListener("change",(function(e){const o=e.target.files[0];if(o){const e=new FileReader;e.onload=function(e){t.src=e.target.result,n.classList.remove("icon"),n.classList.add("image"),c.classList.remove("hidden")},e.readAsDataURL(o)}})),c.addEventListener("click",(function(){t.src="./img/icons/profile-icon.svg",n.classList.add("icon"),n.classList.remove("image"),c.classList.add("hidden")}))})),document.addEventListener("DOMContentLoaded",(function(){let e=document.querySelectorAll(".cabinet__form-step");if(e){let s=0;const i=document.querySelectorAll(".step-next-button"),l=document.querySelectorAll(".step-prev-button"),a=document.querySelector(".step-submit-button"),d=document.querySelectorAll(".stepper .step"),r=document.getElementById("benefit-checkbox"),u=document.querySelector(".file-input");function t(t){e.forEach((e,n)=>{e.style.display=n===t?"flex":"none"}),function(e){d.forEach((t,n)=>{n<=e?t.classList.add("active"):t.classList.remove("active")})}(t),s=t}function n(t){const n=e[t].querySelectorAll("input[required], select[required]");let o=!0;return n.forEach(e=>{e.checkValidity()||(o=!1)}),o}function o(){const t=e.length-1,o=u.files.length>0,c=r.checked,s=n(t);a.disabled=c?!(o&&s):!s}function c(t){e[t].querySelectorAll("input[required], select[required]").forEach(c=>{c.addEventListener("input",()=>{t===e.length-1?o():function(t){e[t].querySelector(".step-next-button").disabled=!n(t)}(t)})})}const m=document.getElementById("next-step-age-check");m&&m.addEventListener("click",(function(){const e=document.querySelector(".birth-day-select").value,n=document.getElementById("month-select").value,o=document.querySelector(".birth-year-select").value,c=document.getElementById("personal-fields"),i=document.getElementById("representative-fields"),l=new Date(`${o}-${n}-${e}`),a=new Date-l;Math.floor(a/315576e5)<16?c&&c.remove():i&&i.remove(),t(s)})),i.forEach((o,c)=>{o.addEventListener("click",(function(){n(c)&&s<e.length-1&&t(s+1)}))}),l.forEach(e=>{e.addEventListener("click",(function(){s>0&&t(s-1)}))}),r.addEventListener("change",o),u.addEventListener("change",o),t(s),e.forEach((e,t)=>c(t)),o()}})),document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll(".password-input"),t=document.querySelector(".change-password-submit"),n=document.querySelector(".password-info-message");e.forEach(e=>{const o=e.nextElementSibling.nextElementSibling;"old-pass"!==e.id&&e.addEventListener("input",(function(){(function(e){const t=/[A-Z]/.test(e),n=/[a-z]/.test(e),o=/\d/.test(e),c=e.length>=8;return t&&n&&o&&c})(e.value)?(e.classList.add("valid"),e.classList.remove("invalid"),o.classList.remove("active"),t.disabled=!1,n&&(n.innerText="Пароль соответствует требованиям")):(o.classList.add("active"),e.classList.add("invalid"),e.classList.remove("valid"),t.disabled=!0,n&&(n.innerText="Пароль должен быть не менее 8 символов длиной, содержать латинские символы верхнего регистра (A-Z), содержать латинские символы нижнего регистра (a-z), содержать цифры (0-9)."))}))})}),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelectorAll(".password-input");document.querySelectorAll(".password-icon").forEach((t,n)=>{t.addEventListener("click",(function(){const t=e[n],o="password"===t.getAttribute("type")?"text":"password";t.setAttribute("type",o),"password"===o?(this.classList.remove("bi-eye"),this.classList.add("bi-eye-slash")):(this.classList.remove("bi-eye-slash"),this.classList.add("bi-eye"))}))})})),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".menu-toggle"),t=document.querySelector(".cabinet__mobile-menu"),n=document.querySelector(".cabinet__mobile-profile"),o=document.querySelector(".cabinet__profile-btn"),c=document.body;e&&e.addEventListener("click",(function(){e.classList.toggle("open"),t.classList.toggle("open"),n.classList.contains("open")&&n.classList.remove("open"),t.classList.contains("open")?c.classList.add("no-scroll"):c.classList.remove("no-scroll")})),n&&o.addEventListener("click",(function(){n.classList.toggle("open"),t.classList.contains("open")&&(t.classList.remove("open"),e.classList.remove("open")),n.classList.contains("open")?c.classList.add("no-scroll"):c.classList.remove("no-scroll")}))})),document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("modal-window-exit"),t=document.getElementById("modal-close-btn"),n=document.querySelector(".cancel-btn"),o=document.querySelectorAll(".exit-btn"),c=document.body;e&&(o.forEach(t=>t.addEventListener("click",(function(t){t.preventDefault(),e.classList.add("open")}))),t.addEventListener("click",(function(){e.classList.remove("open")})),n.addEventListener("click",(function(){e.classList.remove("open")})),e.classList.contains("open")?c.classList.add("no-scroll"):c.classList.remove("no-scroll"),window.addEventListener("click",(function(t){t.target===e&&e.classList.remove("open")})))}));