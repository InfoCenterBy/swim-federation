const asideButton=document.querySelector(".cabinet__aside-button"),asideMenu=document.querySelector(".cabinet__aside"),cabinetContent=document.querySelector(".cabinet__content"),cabinetFooter=document.querySelector(".cabinet__footer");function toggleMenu(){asideMenu.classList.toggle("compact"),asideButton.classList.toggle("compact"),cabinetContent.classList.toggle("full"),cabinetFooter.classList.toggle("full");const e=asideButton.classList.contains("compact"),t=asideMenu.classList.contains("compact"),n=cabinetContent.classList.contains("full"),o=cabinetFooter.classList.contains("full");localStorage.setItem("contentFull",n),localStorage.setItem("footerFull",o),localStorage.setItem("menuCompact",t),localStorage.setItem("menuButtonCompact",e)}document.addEventListener("DOMContentLoaded",(function(){asideMenu.classList.add("ready"),cabinetContent.classList.add("ready"),cabinetFooter.classList.add("ready"),asideButton.classList.add("ready");const e="true"===localStorage.getItem("menuCompact"),t="true"===localStorage.getItem("contentFull"),n="true"===localStorage.getItem("footerFull"),o="true"===localStorage.getItem("menuButtonCompact");e&&asideMenu.classList.add("compact"),t&&cabinetContent.classList.add("full"),n&&cabinetFooter.classList.add("full"),o&&asideButton.classList.add("compact")})),asideButton.addEventListener("click",toggleMenu),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelectorAll("#year-select"),t=(new Date).getFullYear();e.forEach(e=>{for(let n=t;n>=1940;n--){const t=document.createElement("option");t.value=n,t.textContent=n,e.appendChild(t)}});document.querySelectorAll("#day-select").forEach(e=>{for(let t=1;t<=31;t++){const n=document.createElement("option");n.value=t,n.textContent=t,e.appendChild(n)}});const n=document.getElementById("region"),o=document.getElementById("city"),s=document.getElementById("school");n.addEventListener("change",(function(){""!==n.value&&(o.disabled=!1)})),o.addEventListener("change",(function(){""!==o.value&&(s.disabled=!1)}))}));const phoneInput=document.getElementById("phone"),additionalPhoneInput=document.getElementById("additional-phone");phoneInput&&IMask(phoneInput,{mask:"+{375}(00)000-00-00",lazy:!1}),additionalPhoneInput&&IMask(additionalPhoneInput,{mask:"+{375}(00)000-00-00",lazy:!1});const benefitCheckbox=document.getElementById("benefit-checkbox"),fileUploadSection=document.querySelector(".file-upload-section"),fileUploadBody=document.querySelector(".file-upload-body"),customFileInputButton=document.querySelector(".custom-file-button"),fileInput=document.querySelector(".file-input"),filePreview=document.querySelector(".file-preview"),fileName=document.querySelector(".file-name"),fileThumbnail=document.querySelector(".file-thumbnail"),cancelButton=document.querySelector(".cancel-button");if(benefitCheckbox){function resetFileInput(){fileInput.value="",fileName.textContent="",fileThumbnail.src="",fileThumbnail.classList.add("hidden"),filePreview.classList.add("hidden"),cancelButton.classList.add("hidden"),fileUploadBody.classList.remove("hidden")}benefitCheckbox.addEventListener("change",(function(){this.checked?fileUploadSection.classList.remove("hidden"):(fileUploadSection.classList.add("hidden"),resetFileInput())})),customFileInputButton.addEventListener("click",(function(){fileInput.click()})),fileInput.addEventListener("change",(function(e){const t=e.target.files[0];if(t)if(fileName.textContent=t.name,filePreview.classList.remove("hidden"),cancelButton.classList.remove("hidden"),fileUploadBody.classList.add("hidden"),t.type.startsWith("image/")){const e=new FileReader;e.onload=function(e){fileThumbnail.src=e.target.result,fileThumbnail.classList.remove("hidden")},e.readAsDataURL(t)}else fileThumbnail.classList.add("hidden"),fileThumbnail.src="",fileThumbnail.alt=""})),cancelButton.addEventListener("click",(function(){resetFileInput()}))}document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("cabinet__form"),t=document.getElementById("modal-window"),n=document.querySelectorAll(".modal-close-btn"),o=document.body;t&&e&&n&&(e.addEventListener("submit",(function(e){e.preventDefault(),t.classList.add("open"),o.classList.add("no-scroll")})),n.forEach(e=>{e.addEventListener("click",(function(){t.classList.remove("open"),o.classList.remove("no-scroll")}))}),window.addEventListener("click",(function(e){e.target===t&&(t.classList.remove("open"),o.classList.remove("no-scroll"))})))})),document.addEventListener("DOMContentLoaded",(function(){let e=document.querySelectorAll(".cabinet__form-step");if(e){let c=0;const a=document.querySelectorAll(".step-next-button"),d=document.querySelectorAll(".step-prev-button"),r=document.querySelector(".step-submit-button"),u=document.querySelectorAll(".stepper .step"),m=document.getElementById("benefit-checkbox"),f=document.querySelector(".file-input"),p=document.getElementById("phone"),L=document.querySelector(".step-next-button-3");function t(t){e.forEach((e,n)=>{e.style.display=n===t?"flex":"none"}),o(t),c=t,t<e.length-1&&i(t)}function n(){let e=!0;return 12===p.value.replace(/\D/g,"").length?(L.disabled=!1,e=!0):(L.disabled=!0,e=!1),e}function t(t){e.forEach((e,n)=>{e.style.display=n===t?"flex":"none"}),o(t),c=t,t<e.length-1&&i(t)}function o(e){u.forEach((t,n)=>{n<=e?t.classList.add("active"):t.classList.remove("active")})}function s(t){const o=e[t].querySelectorAll("input[required]:not(.hidden), select[required]:not(.hidden)");let s=!0;if(o.forEach(e=>{e.checkValidity()||(s=!1)}),2==t){return n()}return s}function i(t){e[t].querySelector(".step-next-button").disabled=!s(t)}function l(){const t=e.length-1,n=f.files.length>0,o=m.checked,i=s(t);r.disabled=o?!(n&&i):!i}p.addEventListener("input",n);const g=document.getElementById("next-step-age-check");g&&g.addEventListener("click",(function(){const e=document.querySelector(".birth-day-select").value,n=document.getElementById("month-select").value,o=document.querySelector(".birth-year-select").value,s=document.getElementById("personal-fields"),i=document.getElementById("representative-fields"),l=new Date(`${o}-${n}-${e}`),a=new Date-l;if(Math.floor(a/31536e6)<16){if(s){s.classList.add("hidden"),i.classList.remove("hidden");s.querySelectorAll("input, select").forEach(e=>{e.classList.add("hidden"),e.removeAttribute("required")});i.querySelectorAll("input, select").forEach(e=>{e.classList.remove("hidden"),e.setAttribute("required","true")})}}else if(i){s.classList.remove("hidden"),i.classList.add("hidden");s.querySelectorAll("input, select").forEach(e=>{e.classList.remove("hidden"),e.setAttribute("required","true")});i.querySelectorAll("input, select").forEach(e=>{e.classList.add("hidden"),e.removeAttribute("required")})}t(c)})),a.forEach((n,o)=>{n.addEventListener("click",(function(){s(o)&&c<e.length-1&&t(c+1)}))}),d.forEach(e=>{e.addEventListener("click",(function(){c>0&&t(c-1)}))}),m.addEventListener("change",l),f.addEventListener("change",l),t(c),e.forEach((t,n)=>{var o;e[o=n].querySelectorAll("input[required], select[required]").forEach(t=>{t.addEventListener("input",()=>{o===e.length-1?l():i(o)})})}),l()}})),document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll(".password-input"),t=document.querySelector(".change-password-submit"),n=document.querySelector(".password-info-message");e.forEach(e=>{const o=e.nextElementSibling.nextElementSibling;"old-pass"!==e.id&&e.addEventListener("input",(function(){(function(e){const t=/[A-Z]/.test(e),n=/[a-z]/.test(e),o=/\d/.test(e),s=e.length>=8;return t&&n&&o&&s})(e.value)?(e.classList.add("valid"),e.classList.remove("invalid"),o.classList.remove("active"),t.disabled=!1,n&&(n.innerText="Пароль соответствует требованиям")):(o.classList.add("active"),e.classList.add("invalid"),e.classList.remove("valid"),t.disabled=!0,n&&(n.innerText="Пароль должен быть не менее 8 символов длиной, содержать латинские символы верхнего регистра (A-Z), содержать латинские символы нижнего регистра (a-z), содержать цифры (0-9)."))}))})}),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelectorAll(".password-input");document.querySelectorAll(".password-icon").forEach((t,n)=>{t.addEventListener("click",(function(){const t=e[n],o="password"===t.getAttribute("type")?"text":"password";t.setAttribute("type",o),"password"===o?(this.classList.remove("bi-eye"),this.classList.add("bi-eye-slash")):(this.classList.remove("bi-eye-slash"),this.classList.add("bi-eye"))}))})})),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".menu-toggle"),t=document.querySelector(".cabinet__mobile-menu"),n=document.querySelector(".cabinet__mobile-profile"),o=document.querySelector(".cabinet__profile-btn"),s=document.body;e&&e.addEventListener("click",(function(){e.classList.toggle("open"),t.classList.toggle("open"),n.classList.contains("open")&&n.classList.remove("open"),t.classList.contains("open")?s.classList.add("no-scroll"):s.classList.remove("no-scroll")})),n&&o.addEventListener("click",(function(){n.classList.toggle("open"),t.classList.contains("open")&&(t.classList.remove("open"),e.classList.remove("open")),n.classList.contains("open")?s.classList.add("no-scroll"):s.classList.remove("no-scroll")}))})),document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("modal-window-exit"),t=document.getElementById("modal-close-btn"),n=document.querySelector(".cancel-btn"),o=document.querySelectorAll(".exit-btn"),s=document.body;e&&(o.forEach(t=>t.addEventListener("click",(function(t){t.preventDefault(),e.classList.add("open")}))),t.addEventListener("click",(function(){e.classList.remove("open")})),n.addEventListener("click",(function(){e.classList.remove("open")})),e.classList.contains("open")?s.classList.add("no-scroll"):s.classList.remove("no-scroll"),window.addEventListener("click",(function(t){t.target===e&&e.classList.remove("open")})))})),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".cabinet__profile-img-input"),t=document.querySelector(".cabinet__profile-img img"),n=document.querySelector(".cabinet__profile-img"),o=document.getElementById("custom-upload-button"),s=document.getElementById("custom-delete-button"),i=document.querySelector(".member-card__avatar");o.addEventListener("click",()=>{e.click()}),e.addEventListener("change",(function(e){const o=e.target.files[0];if(o){const e=new FileReader;e.onload=function(e){t.src=e.target.result,i.src=e.target.result,i.classList.remove("hidden"),n.classList.remove("icon"),n.classList.add("image"),s.classList.remove("hidden")},e.readAsDataURL(o)}})),s.addEventListener("click",(function(){t.src="./img/icons/profile-icon.svg",n.classList.add("icon"),n.classList.remove("image"),s.classList.add("hidden"),i.classList.add("hidden")}))}));const gridOptions={rowData:[{requestNumber:"44",fio:"Альхимович Евгений Иванович",email:"kononov@mail.ru",requestType:"Заявка на вступление в члены ОО «БФП»",submissionDate:"15.03.2023 14:45",status:"Новая"},{requestNumber:"1",fio:"Кононович Евгений Иванович",email:"kononov@mail.ru",requestType:"Заявка на вступление в члены ОО «БФП»",submissionDate:"15.03.2023 14:45",status:"Новая"},{requestNumber:"77",fio:"Кабан Евгений Иванович",email:"kononov@mail.ru",requestType:"Заявка на вступление в члены ОО «БФП»",submissionDate:"Не 15.03.2023 14:45",status:"Новая"},{requestNumber:"123",fio:"Альхимович Евгений Иванович",email:"kononov@mail.ru",requestType:"Заявка на вступление в члены ОО «БФП»",submissionDate:"Не 15.03.2023 14:45",status:"Одобрена"},{requestNumber:"98",fio:"Кононович Евгений Иванович",email:"kononov@mail.ru",requestType:"Заявка на вступление в члены ОО «БФП»",submissionDate:"15.03.2023 14:45",status:"Одобрена"},{requestNumber:"222",fio:"Кононович Евгений Иванович",email:"kononov@mail.ru",requestType:"Заявка на вступление в члены ОО «БФП»",submissionDate:"15.03.2023 14:45",status:"Отклонена"}],columnDefs:[{field:"requestNumber",headerName:"№"},{field:"fio",headerName:"ФИО"},{field:"email",headerName:"Email"},{field:"requestType",headerName:"Тип заявки"},{field:"submissionDate",headerName:"Дата подачи"},{field:"status",headerName:"Статус"}],defaultColDef:{flex:1},onColumnMoved:onColumnMoved,onColumnResized:onColumnResized,onSortChanged:onSortChanged,onGridReady:onGridReady,isExternalFilterPresent:()=>""!==document.getElementById("fioFilterInput").value||""!==document.getElementById("requestNumberFilterInput").value||""!==document.getElementById("emailFilterInput").value||""!==document.getElementById("statusFilterSelect").value,doesExternalFilterPass:e=>{const t=document.getElementById("fioFilterInput").value.toLowerCase(),n=document.getElementById("requestNumberFilterInput").value;console.log(typeof n);const o=document.getElementById("emailFilterInput").value.toLowerCase(),s=!t||e.data.fio.toLowerCase().includes(t);console.log(s);const i=!n||e.data.requestNumber.includes(n);console.log(i);const l=!o||e.data.email.toLowerCase().includes(o);return console.log(l),s&&i&&l}};function onColumnMoved(e){const t=e.api.getColumnState();console.log("moved"),localStorage.setItem("agColumnState",JSON.stringify(t))}function onColumnResized(e){const t=e.api.getColumnState();localStorage.setItem("agColumnState",JSON.stringify(t))}function onSortChanged(e){const t=e.api.getColumnState();localStorage.setItem("agColumnState",JSON.stringify(t))}function onGridReady(e){const t=JSON.parse(localStorage.getItem("agColumnState"));t&&e.api.applyColumnState({state:t,applyOrder:!0});const n=()=>e.api.onFilterChanged();document.getElementById("fioFilterInput").addEventListener("input",(function(){e.api.onFilterChanged()})),document.getElementById("requestNumberFilterInput").addEventListener("input",n),document.getElementById("emailFilterInput").addEventListener("input",n),document.getElementById("statusFilterSelect").addEventListener("change",n)}const ediv=document.querySelector("#applications-table"),gridApi=agGrid.createGrid(ediv,gridOptions);